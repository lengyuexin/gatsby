---
title: 'diss SymbolğŸ˜'
date: '2019-06-27'
spoiler: Symbolåˆ°åº•æœ‰ä½•ç”¨å¤„
---

> è¯´å®è¯ï¼Œä½œä¸ºjsçš„ç¬¬7ç§åŸå§‹ç±»å‹ï¼Œæ„Ÿè§‰Symbolåœ¨æˆ‘ä»¬å·¥ä½œä¸­çš„ä»·å€¼çœŸçš„ä¸å¤§ï¼Œè¦ä¹ˆæ˜¯æ³¨å†Œå…¨å±€å¸¸é‡ï¼Œé™¤å»äº†èµ‹å€¼çš„çƒ¦æ¼ï¼Œè¦ä¹ˆæ˜¯ä½œä¸ºå¯¹è±¡propertyå”¯ä¸€keyï¼Œè¦ä¹ˆæ˜¯åˆ©ç”¨å†…ç½®Symbolé‡æ–°æ”¹é€ åŸç”Ÿå¯¹è±¡çš„å†…éƒ¨è¡Œä¸ºã€‚

ä»ç¬¬ä¸€ç§ä½œç”¨å¼€å§‹disså§ï¼Œä»ä½¿ç”¨åœºæ™¯æ¥è¯´ï¼Œç¬¬ä¸€ç§çœŸçš„å¾ˆé¸¡è‚‹ï¼Œæˆ‘å¯»éäº†æ‰€æœ‰æˆ‘çš„ä»£ç ä¸­çš„å¸¸é‡ï¼Œæˆ‘å‘ç°ä»–ä»¬çš„èµ‹å€¼éƒ½æ˜¯æœ‰çœŸæ­£æ„ä¹‰ä¸Šçš„ç”¨å¤„çš„ï¼Œæ¯”å¦‚è¦å’ŒæœåŠ¡ç«¯å¯¹é½ï¼Œè¦å’Œäº§å“å¯¹é½ï¼Œå°±æ‹¿[es6ä¸­æ–‡æ–‡æ¡£](http://caibaojian.com/es6/symbol.html)è¿™é‡Œçš„ä¾‹å­æ¥è¯´å§ï¼Œæˆ‘è®¤ä¸ºæ˜¯æ²¡æœ‰è¯´å…¨é¢çš„ï¼Œè¯·çœ‹ä»£ç ï¼š

```
function getArea(shape, options) {
  var area = 0;

  switch (shape) {
    case 'Triangle': // é­”æœ¯å­—ç¬¦ä¸²
      area = .5 * options.width * options.height;
      break;
    /* ... more code ... */
  }

  return area;
}

getArea('Triangle', { width: 100, height: 100 }); // é­”æœ¯å­—ç¬¦ä¸²
```
ä¹ä¸€çœ‹ï¼ŒçœŸçš„æ˜¯æ¶ˆé™¤äº†é­”æœ¯å­—ç¬¦ä¸²ã€‚é‚£ä¹ˆå¦å¤–ä¸€ä¸ªé—®é¢˜æ¥äº†ï¼Œä»€ä¹ˆæ—¶å€™ä¼šç”¨åˆ°getAreaï¼Œä¸€å®šæ˜¯äº§å“çš„éœ€æ±‚å‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦ç»˜åˆ¶ä¸€ä¸ªä¸‰è§’å½¢ï¼Œé‚£ä¹ˆè¿™æ®µä»£ç æ˜¯è¦ç»™è°çœ‹çš„ï¼Œç»™æˆ‘ä»¬çš„å¼€å‘åŒäº‹ä¸€èµ·çœ‹çš„ï¼Œå¦‚æœä»…ä»…æ˜¯ç”¨Symbolæ¥ä»£æ›¿ï¼Œæ˜¯ä¸æ˜¯æœ‰ç‚¹ä¸æ¸…ä¸æ¥šï¼Œç”¨Triangleå´è®©äººä¸€ç›®äº†ç„¶ï¼Œä½†æ˜¯Triangleç¡®å®æ˜¯ä¸ªé­”æœ¯å­—ç¬¦ä¸²ï¼Œæ— æ„ä¹‰çš„å­—ç¬¦ä¸²å‡ºç°åœ¨ä»£ç ä¸­ä¸€çœ‹å°±ä¸ä¸“ä¸šã€‚è¯·çœ‹ä¸‹ä¸€æ®µä¼˜åŒ–ä»£ç ï¼š

```
var shapeType = {
  triangle: 'Triangle'
};

function getArea(shape, options) {
  var area = 0;
  switch (shape) {
    case shapeType.triangle:
      area = .5 * options.width * options.height;
      break;
  }
  return area;
}

getArea(shapeType.triangle, { width: 100, height: 100 });
```
å“¦ï¼Ÿæˆ‘ç†è§£çš„æ˜¯ç”¨`const TRIANGLE = 'Triangle'`ï¼Œå¥½æ­¹æå‡ºä¸€ä¸ªå˜é‡ï¼Œæ²¡æƒ³åˆ°å¯ä»¥`shapeType.triangle`ï¼Œè¿™æ ·æ—¢è§£å†³äº†triangleè®©äººä¸€ç›®äº†ç„¶ï¼ŒåˆæŠŠå­—ç¬¦ä¸²æå‡ºæ¥äº†ã€‚å†çœ‹æœ€åä¸€æ®µä»£ç ï¼š

```
const shapeType = {
  triangle: Symbol()
};
````
ä¼˜ç§€å•Šï¼ç³Ÿç³•ï¼Œæˆ‘è¢«æˆ‘è‡ªå·±è¯´æœäº†ï¼Œæ”¶å›ç¬¬ä¸€ç§ä½œç”¨å¾ˆé¸¡è‚‹çš„è¯´æ³•ï¼Œå¯¹ä¸èµ·æ‰“æ‰°äº†ï¼ˆå§¨æ¯ç¬‘

å†çœ‹ç¬¬äºŒç§ï¼Œè¯´ä¸€ä¸ªæˆ‘åœ¨æ—¥å¸¸å·¥ä½œä¸­çœŸçš„æœ‰é‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼Œä¸Šå®¶å…¬å¸å†™reactçš„æ—¶å€™ï¼Œå’Œåˆ«äººè®¨è®ºconnectå–stateçš„æ—¶å€™æ˜¯å¦è¦å±•å¼€ï¼Œå“ˆï¼Œæˆ‘åšæŒè¦å±•å¼€ï¼Œå› ä¸ºåœ¨ç»„ä»¶ä¸­å–çš„æ—¶å€™æ–¹ä¾¿å•Šï¼Œå“ˆï¼Œåˆ«äººåšæŒä¸è¦å±•å¼€ï¼Œå› ä¸ºæœ‰å¯èƒ½ç»„ä»¶è¿˜éœ€è¦å¦ä¸€ä¸ªstateï¼Œå±•å¼€æœ‰å¯èƒ½keyé‡å¤å•Šã€‚å½“æ—¶è¿˜æ²¡ç”¨è¿‡symbolï¼Œæ‰€ä»¥æˆ‘å¦¥åäº†ï¼Œå¯æ˜¯å°±ç®—ç°åœ¨é‡åˆ°äº†symbolï¼Œso what?æˆ‘å†™çš„æ—¶å€™æ€ä¹ˆèƒ½çŸ¥é“åˆ«äººçš„å“ªä¸ªkeyä¼šå’Œæˆ‘é‡å¤å•Šï¼Œåˆ«äººä¹Ÿä¸çŸ¥é“æˆ‘çš„å•Šï¼Œéš¾é“keyå…¨éƒ½è¦ç”¨symbolæ¥å†™å—ï¼Ÿ

```
var mySymbol = Symbol();
var hisSymbol = Symbol();
var herSymbol = Symbol();
var whoseSymbol = Symbol();

var a = {
  [mySymbol]: 'Hello!'
  [hisSymbol]: 'Symbol!',
  [herSymbol]: 'hhhh',
  [whoseSymbol]: 'hhhh~'ï¼Œ
};

a[mySymbol] // "Hello!"
```
ç–¯éƒ½ç–¯äº†å§ï¼Ÿæ‰€ä»¥ç¬¬äºŒç§æ˜¯çœŸåæ§½ï¼Œä¸æ¥å—åé©³ï¼ˆæš—ä¸­è§‚å¯Ÿï¼Œä½ éš¾é“è¿˜æœ‰å…¶ä»–æ³•é—¨ï¼Ÿ

ç¬¬ä¸‰ç§æˆ‘ä¹Ÿå¾—åæ§½ï¼Œä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºå¤§å¤šæ•°äººçš„å·¥ä½œåœºæ™¯éƒ½ç”¨ä¸äº†ï¼å¬æœ‰äººè¯´è¿™æ˜¯ä¸€ç§å…ƒç¼–ç¨‹ï¼Œä¸€å¬æˆ‘å°±è§‰å¾—ä¸å¾—äº†é«˜å¤§ä¸Šè¶…çº²äº†èµ¶ç´§åœ¨çº¿è†œæ‹œï¼Œæœ€åç†è§£çš„ç»“æœå°±æ˜¯ï¼šç”¨ç¨‹åºå†™ç¨‹åºï¼Œç®€å•ç²—æš´è§å¾—æœ€å¤šçš„å°±æ˜¯ä»£ç ç”Ÿæˆå™¨ï¼Œé‚£åœ¨jsä¸­ç”¨symbolå»æ”¹å˜jsè¿™é—¨è¯­è¨€çš„å®ç°ä¹Ÿå°±æ˜¯ä¸€ç§å…ƒç¼–ç¨‹èƒ½åŠ›ï¼Œè¿™ç§æœºåˆ¶ä¹Ÿå¿…é¡»æ˜¯jsæä¾›ç»™æˆ‘ä»¬çš„ï¼Œç§°ä¹‹ä¸ºåå°„ã€‚æ‰€ä»¥æˆ‘ä»¬ä¼šè¯´jså…·æœ‰äº†å…ƒç¼–ç¨‹æ–¹é¢çš„èƒ½åŠ›ã€‚è¿™é‡Œæœ‰ä¸€æ®µæ•£å‘é™ˆæ—§å‘³é“çš„æ¯”è¾ƒåŸå§‹çš„[å…ƒç¼–ç¨‹ä»£ç ](https://www.cnblogs.com/liuyanlong/archive/2013/05/27/3102161.html)ï¼Œå¯ä»¥ç§ä¸€ç§ã€‚ç§‘æ™®ç»“æŸã€‚æ¥çœ‹çœ‹åˆ«äººå®¶çš„ä»£ç ï¼Œæ”¹é€ jsä»ç°åœ¨å¼€å§‹ï¼š

```
class Even {
  static [Symbol.hasInstance](obj) {
    return Number(obj) % 2 === 0;
  }
}

1 instanceof Even // false
2 instanceof Even // true
12345 instanceof Even // false
```

è¯¶ï¼Ÿä»¿ä½›å¾ˆæœ‰è¶£å¾ˆç‰›é€¼å“¦ï¼é‚£æˆ‘å¯ä¸å¯ä»¥è¿™æ ·å†™ï¼Ÿ

```
class Even {
  static isInstance(obj) {
    return Number(obj) % 2 === 0;
  }
}

Even.isInstance(1) // false
Even.isInstance(2) // true
Even.isInstance(12345) // false
```
ä¸ºä»€ä¹ˆæˆ‘éè¦ç”¨Symbol.hasInstanceå•Šï¼Ÿä¸ºäº†è£…é€¼ã€‚æ¬§ï¼Œå¯¹ä¸èµ·æ‰“æ‰°äº†ï¼ˆå§¨æ¯ç¬‘ï¼‰ã€‚è¯è¯´å›æ¥ï¼Œå¦‚æœè£…é€¼æ²¡äººæ§çš„è¯ä¹Ÿå¾ˆå®¹æ˜“ä¹å‘³çš„å“¦ï¼ä»”ç»†æƒ³æƒ³ï¼Œè£…é€¼çš„å‰ææ˜¯å…±äº«å•Šï¼Œå…±äº«çš„è¯åˆ«äººæ˜¯ä¸æ˜¯å¾—å’Œä½ è¾¾æˆå…±è¯†ï¼Œä½ è¦å‘Šè¯‰åˆ«äººä½ ä»¬åœ¨åšçš„æ˜¯ä¸€é—¨æ–°çš„è¯­è¨€ï¼Œå«js+ï¼Œjs+é‡Œé¢æœ‰å†…ç½®å¯¹è±¡Evenï¼Œç»§æ‰¿äºObjectï¼ŒçœŸçš„å¾ˆå‰å®³å“¦ï¼Œå¦‚æœæœ‰è¿™æ ·çš„å²—ä½ï¼Œè¯·å«ä¸Šæˆ‘ã€‚å¯æƒœæ²¡æœ‰ï¼Œå¯æƒœæˆ‘è¿˜æ˜¯åœ¨å†™ä¸šåŠ¡å†™bugæ¬ç –ï¼Œæ™®é€‚æ€§ä¸å¼ºå•Šï¼

è¿˜æœ‰ä¸€ç§è¯´æ³•ï¼Œå‰ç»æ€§ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰æ„æ€çš„è¯ï¼Œå‰ç»æ€§ğŸ¤”è¦è€ƒè™‘åˆ°å¤šè¿œæ‰ç®—æ˜¯æœ‰ç”¨çš„ï¼Œè€ƒè™‘åˆ°æœªæ¥åˆ«äººä¼šç”¨åˆ°è¿™ä¸ªå‘½åï¼Œæ‰€ä»¥æˆ‘è¦è®©è¿™ä¸ªå‘½åå”¯ä¸€ï¼Œæˆ‘è®¤ä¸ºä¸å¦‚æ¢ç§è¯´æ³•ï¼Œæ¢æˆâ€œè¿™ç»„ä¿¡æ¯æ˜¯å…ƒä¿¡æ¯çš„æ—¶å€™æˆ‘ä»¬å°±ç”¨symbolå»å®šä¹‰â€ï¼Œä¸€æ¥å…ƒä¿¡æ¯å†…éƒ¨ä½¿ç”¨ï¼Œå¯¹è±¡å›ºæœ‰å±æ€§ï¼›äºŒæ¥symbolå”¯ä¸€æ€§ï¼Œè™½ä¸æ˜¯å®Œå…¨ç§æœ‰ä½†å¤§å¤šæ•°æƒ…å†µä¸‹å¤–éƒ¨å¯ä»¥å¿½ç•¥ä¸æ˜“è¢«å‘ç°ï¼Œåœ¨äº`Object.getOwnPropertyNames()`å’Œ`Object.keys()`éƒ½å–ä¸åˆ°å®ƒã€‚

äº‹æƒ…å°±æ˜¯è¿™æ ·çš„ï¼Œç§‘æ™®æ€§çš„æ–‡ç« è´´åœ¨å‚è€ƒèµ„æ–™é‡Œï¼Œè¿™é‡Œåªè®°å½•æ€è€ƒè¿‡ç¨‹ï¼Œæ¬¢è¿dissä¸battleå“¦!

> ps: å†™å®Œæˆ‘åˆè®¤çœŸçœ‹äº†çœ‹ä¸‹é¢ä¸¤ç¯‡æ–‡ç« ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ª[nodejs](https://nodejs.org/api/util.html#util_util_inspect_object_options)ä½¿ç”¨`Symbol.toStringTag`çš„åœ°æ–¹ï¼ŒæƒŠå–œï¼Œä¸€å®šè¦ç‚¹å¼€çœ‹çœ‹å“¦ï¼

Symbolç§‘æ™®ï¼š

[http://caibaojian.com/es6/symbol.html](http://caibaojian.com/es6/symbol.html)

[https://juejin.im/post/5a0e65c1f265da430702d6b9#heading-8](https://juejin.im/post/5a0e65c1f265da430702d6b9#heading-8)
