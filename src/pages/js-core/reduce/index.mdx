---
title: reduce的妙用
date: '2020-12-22'
spoiler: reduce的妙用
---



import P from '../../../components/Panel.js'



### 格式转换


[ "xx1=a", "xx2=b" ] => { "xx1": "a", "xx2": "b" }



<P style={{background:'#FDB99B'}}>

```js
["xx1=a", "xx2=b"].reduce((pre, cur) => {
  const [k, v] = cur.split("=");
  pre[k] = v;
  return pre;
}, {});
```
</P>



### 数组对象去重


<P style={{background:'#FDB99B'}}>

```js
var arr=[
    {
      name:'tom',age:18,
    },
    {
      name:'tom',age:18,
    },
    {
      name:'jack',age:18,
    },
]

function keepSingle(arr = [],field='name') {
  let obj = {};
  let res= arr.reduce( (item, next)=> {
    if(!obj[next[field]]){
        obj[next[field]] = true
        item.push(next);
    }
    return item;
  }, []);

  obj=null
  return res
}
```
</P>


### redux-compose 



<P style={{background:'#FDB99B'}}>

```js

function compose(...funcs){

  if (funcs.length === 0) {
    return arg => arg
  }

  if (funcs.length === 1) {
    return funcs[0]
  }

  return funcs.reduce((a,b)=>(...args)=>{a(b(...args))})

}

```
</P>
