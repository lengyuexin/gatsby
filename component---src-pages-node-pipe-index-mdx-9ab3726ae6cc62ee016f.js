(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{owrD:function(n,e,t){"use strict";t.r(e),t.d(e,"_frontmatter",(function(){return i})),t.d(e,"default",(function(){return u}));t("rGqo"),t("yt8O"),t("Btvt"),t("RW0V"),t("91GP"),t("q1tI");var r=t("7ljp"),a=t("Hv6d"),s=t("JLKy");var i={},o={_frontmatter:i},c=a.a;function u(n){var e=n.components,t=function(n,e){if(null==n)return{};var t,r,a={},s=Object.keys(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)>=0||(a[t]=n[t]);return a}(n,["components"]);return Object(r.b)(c,Object.assign({},o,t,{components:e,mdxType:"MDXLayout"}),Object(r.b)(s.a,{mdxType:"P"},Object(r.b)("p",null,"通过管道可控制流速，当没有写入空间时暂停读取，在有空间时继续读取并完成写入，读取完毕后关闭可写流。")),Object(r.b)(s.a,{style:{background:"#FDB99B"},mdxType:"P"},Object(r.b)("pre",null,Object(r.b)("code",Object.assign({parentName:"pre"},{className:"language-js"}),"\nconst fs = require('fs')\nfunction pipe(readFile,writeFileu){\n    let rs = fs.createReadStream(readFile,{\n        highWaterMark:5\n    })\n    let ws = fs.createWriteStream(writeFileu,{\n        highWaterMark:1\n    })\n    rs.on('data',function(chunk){\n        // 当ws.write() 返回false时\n        //表示没有空间继续写入了，暂停读取\n        if(ws.write(chunk) == false){\n            rs.pause() // 暂停rs的data事件\n        }\n    })\n    // 当触发可写流的drain，表示有空间继续写入了，\n    //继续读取文件\n    ws.on('drain',function(){\n        rs.resume() \n    // 恢复rs的data事件    \n   // 把当前读入的内容都写到文件中了，继续调用读写\n    })\n    // 当读取流触发end方法，表示读取完毕\n    //这时关闭可写流的写入\n    rs.on('end',function(){\n        ws.end()\n    })\n}\npipe('1.txt','./2.txt')\n\n\n\n"))))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-node-pipe-index-mdx-9ab3726ae6cc62ee016f.js.map