(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{s2tT:function(n,e,t){"use strict";t.r(e),t.d(e,"_frontmatter",(function(){return r})),t.d(e,"default",(function(){return u}));t("rGqo"),t("yt8O"),t("Btvt"),t("RW0V"),t("91GP"),t("q1tI");var s=t("7ljp"),c=t("Hv6d"),b=t("JLKy");var r={},a={_frontmatter:r},i=c.a;function u(n){var e=n.components,t=function(n,e){if(null==n)return{};var t,s,c={},b=Object.keys(n);for(s=0;s<b.length;s++)t=b[s],e.indexOf(t)>=0||(c[t]=n[t]);return c}(n,["components"]);return Object(s.b)(i,Object.assign({},a,t,{components:e,mdxType:"MDXLayout"}),Object(s.b)(b.a,{style:{background:"#FDB99B"},mdxType:"P"},Object(s.b)("pre",null,Object(s.b)("code",Object.assign({parentName:"pre"},{className:"language-js"}),'\nclass PubSub {\n  constructor() {\n    // 一个对象存放所有的消息订阅\n    // 每个消息对应一个数组，数组结构如下\n    // {\n    //   "event1": [cb1, cb2]\n    // }\n    this.events = {}\n  }\n\n  subscribe(event, callback) {\n    if(this.events[event]) {\n      // 如果有人订阅过了，这个键已经存在，就往里面加就好了\n      this.events[event].push(callback);\n    } else {\n      // 没人订阅过，就建一个数组，回调放进去\n      this.events[event] = [callback]\n    }\n  }\n\n  publish(event, ...args) {\n    // 取出所有订阅者的回调执行\n    const subscribedEvents = this.events[event];\n\n    if(subscribedEvents && subscribedEvents.length) {\n      subscribedEvents.forEach(callback => {\n        callback(...args);\n      });\n    }\n  }\n\n  unsubscribe(event, callback) {\n    // 删除某个订阅，保留其他订阅\n    const subscribedEvents = this.events[event];\n\n    if(subscribedEvents && subscribedEvents.length) {\n      this.events[event] = this.events[event].filter(cb => cb !== callback)\n    }\n  }\n}\n\n'))))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-js-core-publish-subscribe-index-mdx-5128bcdbe13805a41db5.js.map